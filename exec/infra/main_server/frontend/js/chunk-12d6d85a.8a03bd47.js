(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12d6d85a"],{"159b":function(t,e,a){var o=a("da84"),s=a("fdbc"),n=a("17c2"),r=a("9112");for(var i in s){var c=o[i],d=c&&c.prototype;if(d&&d.forEach!==n)try{r(d,"forEach",n)}catch(u){d.forEach=n}}},"17c2":function(t,e,a){"use strict";var o=a("b727").forEach,s=a("a640"),n=s("forEach");t.exports=n?[].forEach:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}},"794f":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[t._v("chat room")]),a("section",[a("div",{staticClass:"container-fluid mt-4"},[a("div",{staticClass:"mb-3"},[a("span",{staticClass:"mb-0 h2 text-primary"},[t._v(t._s(t.roomName))]),t.user&&t.user.uid!==t.hostID?a("span",{staticClass:"ml-1"},[t._v(" Hosted by: "),a("strong",{staticClass:"text-danger"},[t._v(t._s(t.hostNickName))])]):t._e()]),t.user&&t.user.uid==t.hostID||t.attendeeApproved?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"}),a("div",{staticClass:"col-md-4"},[a("form",[a("input",{attrs:{type:"hidden",name:"roomId",value:"something"}}),a("input",{attrs:{type:"hidden",name:"userId",value:"something"}}),a("input",{attrs:{type:"hidden",name:"roomName",value:"something"}}),!t.attendeeJoined&&t.attendeeApproved?a("button",{staticClass:"btn btn-primary mr-1",on:{click:t.doJoin}},[t._v(" Join ")]):t._e(),t.attendeeJoined?a("button",{staticClass:"btn btn-danger mr-1",attrs:{type:"button"},on:{click:t.doLeave}},[t._v(" Leave ")]):t._e()]),a("h4",{staticClass:"mt-2"},[t._v("Attendees")]),a("ul",{staticClass:"list-unstyled"},t._l(t.attendeesApprovedArr,(function(e){return a("li",{key:e.id},[t.user&&t.user.uid==t.hostID?a("a",{staticClass:"mr-2",attrs:{type:"button",title:"Approve attendee"},on:{click:function(a){return t.toggleApproval(e.id)}}},[t._v(" approve ")]):t._e(),a("span",{staticClass:"mr-2",class:[e.webRTCID?"text-success":"text-secondary"],attrs:{title:"On Air"}}),a("span"),a("span",{staticClass:"pl-1",class:[e.id==t.user.uid?"font-weight-bold text-danger":""]},[t._v(t._s(e.nickName))])])})),0),t.user&&t.user.uid==t.hostID?a("div",[a("h5",{staticClass:"mt-4"},[t._v("Pending")]),a("ul",{staticClass:"list-unstyled"},t._l(t.attendeesPendingArr,(function(e){return a("li",{key:e.id,staticClass:"mb-1"},[a("span",[a("a",{staticClass:"mr-2",attrs:{type:"button",title:"Approve attendee"},on:{click:function(a){return t.toggleApproval(e.id)}}},[t._v("approve ")]),a("a",{staticClass:"text-secondary pr-1",attrs:{type:"button",title:"Delete Attendee"},on:{click:function(a){return t.deleteAttendee(e.id)}}},[t._v(" delete ")])]),a("span",{staticClass:"pl-1"},[t._v(t._s(e.nickName))])])})),0)]):t._e()])]):a("div",[a("p",{staticClass:"lead"},[t._v(" Hi "),a("strong",{staticClass:"text-primary font-weight-bold"},[t._v(t._s(t.user.nickName))]),t._v(", you're currently in the room waiting for the owner of the chat to add you to the meeting. Please wait. ")])])])])])},s=[],n=(a("b0c0"),a("159b"),a("99af"),a("bc3a"),a("17e1")),r={data:function(){return{hostID:this.$route.params.hostID,roomID:this.$route.params.roomID,roomName:null,hostNickName:null,attendeesPendingArr:[],attendeesApprovedArr:[],attendeeApproved:!1,attendeeJoined:!1}},components:{},methods:{toggleApproval:function(t){if(this.user&&this.user.uid==this.hostID){var e=n["a"].collection("users").doc(this.user.uid).collection("rooms").doc(this.roomID).collection("attendees").doc(t);e.get().then((function(t){var a=t.data().approved;console.log("approved",a),a?e.update({approved:!a}):e.update({approved:!0})}))}},deleteAttendee:function(t){this.user&&this.user.uid==this.hostID&&n["a"].collection("users").doc(this.user.uid).collection("rooms").doc(this.roomID).collection("attendees").doc(t).delete()},doJoin:function(){var t=document.querySelector("form");t.action="http://localhost:3000/ar",t.method="POST",t.target="pop",t.roomId.value=this.roomID,t.userId.value=this.user.uid,t.roomName.value=this.roomName,window.open("","pop"),t.submit()},doLeave:function(){this.$refs.webrtc.leave(),this.attendeeJoined=!1}},props:["user"],mounted:function(){var t=this,e=n["a"].collection("users").doc(this.$route.params.hostID).collection("rooms").doc(this.$route.params.roomID);e.get().then((function(e){e.exists?t.roomName=e.data().name:t.$router.push("/")})),e.collection("attendees").onSnapshot((function(e){var a=!1,o=[],s=[];e.forEach((function(e){t.hostID===e.id&&(t.hostNickName=e.data().nickName),t.user&&t.user.uid==e.id&&(a=!0),e.data().approved?(t.user.uid==e.id&&(t.attendeeApproved=!0),s.push({id:e.id,nickName:e.data().nickName,approved:e.data().approved,webRTCID:e.data().webRTCID})):(t.user.uid==e.id&&(t.attendeeApproved=!1),o.push({id:e.id,nickName:e.data().nickName,approved:e.data().approved,webRTCID:e.data().webRTCID}))})),a||t.$router.push("/checkin/".concat(t.hostID,"/").concat(t.roomID)),t.attendeesPendingArr=o,t.attendeesApprovedArr=s}))}},i=r,c=a("2877"),d=Object(c["a"])(i,o,s,!1,null,null,null);e["default"]=d.exports},a640:function(t,e,a){"use strict";var o=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&o((function(){a.call(null,e||function(){throw 1},1)}))}},b0c0:function(t,e,a){var o=a("83ab"),s=a("9bf2").f,n=Function.prototype,r=n.toString,i=/^\s*function ([^ (]*)/,c="name";o&&!(c in n)&&s(n,c,{configurable:!0,get:function(){try{return r.call(this).match(i)[1]}catch(t){return""}}})},b727:function(t,e,a){var o=a("0366"),s=a("44ad"),n=a("7b0b"),r=a("50c4"),i=a("65f0"),c=[].push,d=function(t){var e=1==t,a=2==t,d=3==t,u=4==t,l=6==t,p=7==t,h=5==t||l;return function(m,v,f,b){for(var g,_,C=n(m),I=s(C),y=o(v,f,3),A=r(I.length),D=0,w=b||i,k=e?w(m,A):a||p?w(m,0):void 0;A>D;D++)if((h||D in I)&&(g=I[D],_=y(g,D,C),t))if(e)k[D]=_;else if(_)switch(t){case 3:return!0;case 5:return g;case 6:return D;case 2:c.call(k,g)}else switch(t){case 4:return!1;case 7:c.call(k,g)}return l?-1:d||u?u:k}};t.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterOut:d(7)}}}]);
//# sourceMappingURL=chunk-12d6d85a.8a03bd47.js.map