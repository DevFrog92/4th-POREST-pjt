(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31fb1bc2"],{"159b":function(t,e,r){var o=r("da84"),a=r("fdbc"),n=r("17c2"),i=r("9112");for(var s in a){var c=o[s],u=c&&c.prototype;if(u&&u.forEach!==n)try{i(u,"forEach",n)}catch(m){u.forEach=n}}},"17c2":function(t,e,r){"use strict";var o=r("b727").forEach,a=r("a640"),n=a("forEach");t.exports=n?[].forEach:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}},"733b":function(t,e,r){"use strict";r("c254")},a2da:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"rooms-wrapper"},[r("div",{staticClass:"rooms-section-wrapper"},[r("div",{staticClass:"rooms-section-inner-wrapper"},[r("div",{staticClass:"rooms-section-left"},[r("div",{staticClass:"rooms-section-left-header"}),r("div",{staticClass:"rooms-section-left-content"},[r("h1",[t._v("화상상담방 개설하기")]),r("form",[r("label",{attrs:{for:"roomNmae"}},[t._v("상담방 이름")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.roomName,expression:"roomName"}],ref:"roomName",staticClass:"form-control",attrs:{type:"text",name:"roomName",placeholder:"Room name","aria-describedby":"buttonAdd"},domProps:{value:t.roomName},on:{input:function(e){e.target.composing||(t.roomName=e.target.value)}}}),r("label",{attrs:{for:"roomCapacity"}},[t._v("상담방 허용인원")]),r("input",{attrs:{type:"number",min:"1",max:"2"},domProps:{value:t.capacity}}),t._v("명 "),r("label",{attrs:{for:"roomPublic"}},[t._v("상담방 얼굴 공개 여부")]),t._m(0),r("div",{staticClass:"room-category"},[r("div",{staticClass:"category",on:{click:function(t){}}},[t._v("학교생활")]),r("div",{staticClass:"category"},[t._v("직장생활")]),r("div",{staticClass:"category"},[t._v("학업 및 진호")]),r("div",{staticClass:"category"},[t._v("심리 및 정서")]),r("div",{staticClass:"category"},[t._v("대인관계")]),r("div",{staticClass:"category"},[t._v("연애")]),r("div",{staticClass:"category"},[t._v("성")]),r("div",{staticClass:"category"},[t._v("자녀육아")])]),r("button",{staticClass:"btn btn-sm btn-info",attrs:{type:"submit",id:"buttonAdd"},on:{click:function(e){return e.preventDefault(),t.checkRoomName(e)}}},[t._v(" 개설하기 ")])])])]),r("div",{staticClass:"rooms-section-right"},t._l(t.rooms,(function(e,o){return r("div",{key:o},[r("div",{staticClass:"room-card-wrapper"},[r("div",{on:{click:function(r){return t.moveToCheckIn(e.id,e.name)}}},[t._v(" "+t._s(e)+" 방 ")]),t.uid===e.hostID?r("span",{on:{click:function(r){return t.deleteRoom(e.id,o)}}},[t._v("Delete")]):t._e()])])})),0)])])])},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"roomPublic-wrapper"},[r("div",{staticClass:"face-show"},[t._v("공개")]),r("div",{staticClass:"face-noshow"},[t._v("비공개")])])}],n=r("1da1"),i=(r("96cf"),r("159b"),r("b0c0"),r("a434"),r("99af"),r("17e1")),s=r("260b"),c=(r("ea7b"),{name:"RoomsPage",data:function(){return{roomName:null,uid:this.$store.state.uid,rooms:[],addState:!1,roomNameCheck:!1,capacity:1}},props:["user"],mounted:function(){0==this.rooms.length&&this.loadData()},methods:{checkRoomName:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.rooms.forEach((function(e){e.name==t.roomName&&(t.roomNameCheck=!0)}));case 2:t.roomNameCheck?t.roomName="":t.addRoom();case 3:case"end":return e.stop()}}),e)})))()},addRoom:function(){var t=this;this.addState=!0;var e=i["a"].collection("users").doc(this.user.uid);e.set({name:this.user.uid}),e.collection("rooms").add({name:this.roomName,createdAt:s["a"].firestore.FieldValue.serverTimestamp()}).then((function(){t.roomName=""}))},deleteRoom:function(t,e){i["a"].collection("users").doc(this.user.uid).collection("rooms").doc(t).delete(),this.rooms.splice(e,1)},moveToCheckIn:function(t,e){this.uid||(this.uid="none"),this.$router.push({path:"/checkin/".concat(this.uid,"/").concat(t),params:{roomId:t,roomNameParams:e}})},loadData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=i["a"].collection("users"),e.next=3,r.get().then(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.forEach(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.doc(o.id).collection("rooms").onSnapshot(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.forEach((function(e){var r={id:e.id,hostID:o.id,name:e.data().name};if(0!=t.rooms.length){for(var a=!1,n=0;n<t.rooms.length;n++)t.rooms[n]["id"]===e.id&&(a=!0);!a&&t.addState?t.rooms.unshift(r):a||t.addState||t.rooms.push(r)}else t.rooms.push(r)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})))()}},created:function(){var t=this.$store.getters.getAuthToken;""!=t&&null!=t||(alert("로그인이 필요합니다."),this.$router.push({name:"Login"}))}}),u=c,m=(r("733b"),r("2877")),l=Object(m["a"])(u,o,a,!1,null,"f1e1b5c0",null);e["default"]=l.exports},a434:function(t,e,r){"use strict";var o=r("23e7"),a=r("23cb"),n=r("a691"),i=r("50c4"),s=r("7b0b"),c=r("65f0"),u=r("8418"),m=r("1dde"),l=m("splice"),d=Math.max,f=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!l},{splice:function(t,e){var r,o,m,l,p,b,g=s(this),w=i(g.length),C=a(t,w),_=arguments.length;if(0===_?r=o=0:1===_?(r=0,o=w-C):(r=_-2,o=f(d(n(e),0),w-C)),w+r-o>h)throw TypeError(v);for(m=c(g,o),l=0;l<o;l++)p=C+l,p in g&&u(m,l,g[p]);if(m.length=o,r<o){for(l=C;l<w-o;l++)p=l+o,b=l+r,p in g?g[b]=g[p]:delete g[b];for(l=w;l>w-o+r;l--)delete g[l-1]}else if(r>o)for(l=w-o;l>C;l--)p=l+o-1,b=l+r-1,p in g?g[b]=g[p]:delete g[b];for(l=0;l<r;l++)g[l+C]=arguments[l+2];return g.length=w-o+r,m}})},a640:function(t,e,r){"use strict";var o=r("d039");t.exports=function(t,e){var r=[][t];return!!r&&o((function(){r.call(null,e||function(){throw 1},1)}))}},b727:function(t,e,r){var o=r("0366"),a=r("44ad"),n=r("7b0b"),i=r("50c4"),s=r("65f0"),c=[].push,u=function(t){var e=1==t,r=2==t,u=3==t,m=4==t,l=6==t,d=7==t,f=5==t||l;return function(h,v,p,b){for(var g,w,C=n(h),_=a(C),y=o(v,p,3),k=i(_.length),x=0,N=b||s,R=e?N(h,k):r||d?N(h,0):void 0;k>x;x++)if((f||x in _)&&(g=_[x],w=y(g,x,C),t))if(e)R[x]=w;else if(w)switch(t){case 3:return!0;case 5:return g;case 6:return x;case 2:c.call(R,g)}else switch(t){case 4:return!1;case 7:c.call(R,g)}return l?-1:u||m?m:R}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},c254:function(t,e,r){}}]);
//# sourceMappingURL=chunk-31fb1bc2.7f98519c.js.map