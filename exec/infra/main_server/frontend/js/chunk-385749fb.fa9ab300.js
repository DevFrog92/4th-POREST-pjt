(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-385749fb"],{"0443":function(e,t,o){},"0923":function(e,t,o){"use strict";o("0443")},"159b":function(e,t,o){var a=o("da84"),n=o("fdbc"),s=o("17c2"),r=o("9112");for(var i in n){var d=a[i],c=d&&d.prototype;if(c&&c.forEach!==s)try{r(c,"forEach",s)}catch(u){c.forEach=s}}},"17c2":function(e,t,o){"use strict";var a=o("b727").forEach,n=o("a640"),s=n("forEach");e.exports=s?[].forEach:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}},a640:function(e,t,o){"use strict";var a=o("d039");e.exports=function(e,t){var o=[][e];return!!o&&a((function(){o.call(null,t||function(){throw 1},1)}))}},a94b:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"approve-wrapper"},[o("div",{staticClass:"approve-inner-wrapper"},[o("div",{staticClass:"room-name-header"},[o("div",{staticClass:"room_name"},[e._v(e._s(e.roomName))]),o("div",{staticClass:"buttons"},[o("form",{staticClass:"approve-form",on:{submit:function(e){e.preventDefault()}}},[o("input",{attrs:{type:"hidden",name:"roomId",value:"something"}}),o("input",{attrs:{type:"hidden",name:"userId",value:"something"}}),o("input",{attrs:{type:"hidden",name:"roomName",value:"something"}}),!e.attendeeJoined&&e.attendeeApproved?o("button",{staticClass:"join-btn",on:{click:e.doJoin}},[e._v(" 입장하기 ")]):e._e(),!e.attendeeJoined&&e.attendeeApproved?o("button",{staticClass:"leave-btn",on:{click:e.doLeave}},[e._v(" 나가기 ")]):e._e()])])]),e.user&&e.user.uid==e.hostId||e.attendeeApproved?o("div",{staticClass:"attendee-list-wrapper"},[o("div",{staticClass:"attendee-attend"},[o("h4",{},[e._v("참가자")]),o("ul",{},e._l(e.attendeesApprovedArr,(function(t,a){return o("li",{key:t.id},[t.id!=e.hostId?o("div",{staticClass:"attendee-nickname"},[e._v("익명이"+e._s(a+1))]):o("div",{staticClass:"attendee-nickname"},[e._v("담이")]),e.user&&e.user.uid==e.hostId?o("a",{staticClass:"approve-btn-attend",attrs:{type:"button",title:"Approve attendee"},on:{click:function(o){return e.toggleApproval(t.id)}}},[e._v(" 내보내기 ")]):e._e()])})),0)]),e.user&&e.user.uid==e.hostId?o("div",{staticClass:"attendee-wait"},[o("h4",{},[e._v("참가 대기자")]),o("ul",{},e._l(e.attendeesPendingArr,(function(t,a){return o("li",{key:t.id},[t.id!=e.hostId?o("div",{staticClass:"attendee-nickname"},[e._v("익명이"+e._s(a+1))]):o("div",{staticClass:"attendee-nickname"},[e._v("담이")]),o("span",[o("a",{staticClass:"approve-btn-attend",attrs:{type:"button",title:"Approve attendee"},on:{click:function(o){return e.toggleApproval(t.id)}}},[e._v("참가승인 ")]),o("a",{staticClass:"approve-btn-delete",attrs:{type:"button",title:"Delete Attendee"},on:{click:function(o){return e.deleteAttendee(t.id)}}},[e._v("참가거절")])])])})),0)]):e._e()]):o("div",[o("p",{staticClass:"lead"},[e._v(" 안녕하세요! 현재 참가 요청에 대한 방장의 승인이 진행 중에 있습니다. 잠시만 기다려주세요! ")])])])])},n=[],s=(o("159b"),o("bc3a"),o("17e1")),r={data:function(){return{hostNickName:null,attendeesPendingArr:[],attendeesApprovedArr:[],attendeeApproved:!1,attendeeJoined:!1}},components:{},methods:{toggleApproval:function(e){if(this.user&&this.user.uid==this.hostId){var t=s["a"].collection("users").doc(this.user.uid).collection("rooms").doc(this.roomId).collection("attendees").doc(e);t.get().then((function(e){var o=e.data().approved;console.log("approved",o),o?t.update({approved:!o}):t.update({approved:!0})}))}},deleteAttendee:function(e){console.log("삭제한다"),this.user&&this.user.uid==this.hostId&&s["a"].collection("users").doc(this.user.uid).collection("rooms").doc(this.roomId).collection("attendees").doc(e).delete()},doJoin:function(){var e=document.querySelector(".approve-form");e.action="http://localhost:3000/ar",e.method="POST",e.target="pop",e.roomId.value=this.roomId,e.userId.value=this.user.uid,e.roomName.value=this.roomName,window.open("","pop"),e.submit()},doLeave:function(){this.attendeeJoined=!1,this.$emit("exitRoom")}},props:["user","roomId","roomName","hostId"],mounted:function(){var e=this;console.log("this is approve page",this.user,this.roomId,this.roomName,this.hostId);var t=s["a"].collection("users").doc(this.hostId).collection("rooms").doc(this.roomId);t.get().then((function(t){t.exists||(alert("존재하지 않는 상담방입니다."),e.$router.push("/all/rooms"))})),t.collection("attendees").onSnapshot((function(t){var o=!1,a=[],n=[];t.forEach((function(t){e.hostId===t.id&&(e.hostNickName="담이"),e.user&&e.user.uid==t.id&&(o=!0),t.data().approved?(e.user.uid==t.id&&(e.attendeeApproved=!0),n.push({id:t.id,approved:t.data().approved})):(e.user.uid==t.id&&(e.attendeeApproved=!1),a.push({id:t.id,approved:t.data().approved}))})),o||(alert("체크인 하지 않은 유저는 입장하실 수 없습니다."),e.$router.push("/all/rooms")),e.attendeesPendingArr=a,e.attendeesApprovedArr=n}))}},i=r,d=(o("0923"),o("2877")),c=Object(d["a"])(i,a,n,!1,null,"0f1a85a3",null);t["default"]=c.exports},b727:function(e,t,o){var a=o("0366"),n=o("44ad"),s=o("7b0b"),r=o("50c4"),i=o("65f0"),d=[].push,c=function(e){var t=1==e,o=2==e,c=3==e,u=4==e,l=6==e,p=7==e,v=5==e||l;return function(h,f,m,b){for(var _,A,I=s(h),g=n(I),C=a(f,m,3),k=r(g.length),w=0,y=b||i,N=t?y(h,k):o||p?y(h,0):void 0;k>w;w++)if((v||w in g)&&(_=g[w],A=C(_,w,I),e))if(t)N[w]=A;else if(A)switch(e){case 3:return!0;case 5:return _;case 6:return w;case 2:d.call(N,_)}else switch(e){case 4:return!1;case 7:d.call(N,_)}return l?-1:c||u?u:N}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)}}}]);
//# sourceMappingURL=chunk-385749fb.fa9ab300.js.map