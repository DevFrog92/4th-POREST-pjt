(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f44d94a"],{"0616":function(e,t,o){"use strict";o("ec07")},"159b":function(e,t,o){var r=o("da84"),n=o("fdbc"),a=o("17c2"),i=o("9112");for(var c in n){var s=r[c],u=s&&s.prototype;if(u&&u.forEach!==a)try{i(u,"forEach",a)}catch(m){u.forEach=a}}},"17c2":function(e,t,o){"use strict";var r=o("b727").forEach,n=o("a640"),a=n("forEach");e.exports=a?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},a2da:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"rooms-wrapper"},[o("div",{staticClass:"rooms-section-wrapper"},[o("div",{staticClass:"rooms-section-inner-wrapper"},[o("div",{staticClass:"rooms-section-left"},[o("div",{staticClass:"rooms-section-left-header"}),o("div",{staticClass:"rooms-section-left-content"},[o("h1",[e._v("화상상담방 개설하기")]),o("form",[o("label",{attrs:{for:"roomNmae"}},[e._v("상담방 이름")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.roomName,expression:"roomName"}],ref:"roomName",staticClass:"form-control",attrs:{type:"text",name:"roomName",placeholder:"Room name","aria-describedby":"buttonAdd"},domProps:{value:e.roomName},on:{input:function(t){t.target.composing||(e.roomName=t.target.value)}}}),o("label",{attrs:{for:"roomCapacity"}},[e._v("상담방 허용인원")]),o("input",{attrs:{type:"number",min:"1",max:"2"},domProps:{value:e.capacity}}),e._v("명 "),o("label",{attrs:{for:"roomPublic"}},[e._v("상담방 얼굴 공개 여부")]),e._m(0),o("button",{staticClass:"btn btn-sm btn-info",attrs:{type:"submit",id:"buttonAdd"},on:{click:function(t){return t.preventDefault(),e.checkRoomName(t)}}},[e._v(" 개설하기 ")])])])]),o("div",{staticClass:"rooms-section-right"},e._l(e.rooms,(function(t,r){return o("div",{key:r},[o("div",{staticClass:"room-card-wrapper"},[o("div",{on:{click:function(o){return e.moveToCheckIn(t.id,t.name)}}},[e._v(e._s(t)+" 방")]),e.uid===t.hostID?o("span",{on:{click:function(o){return e.deleteRoom(t.id,r)}}},[e._v("Delete")]):e._e()])])})),0)])])])},n=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"roomPublic-wrapper"},[o("div",{staticClass:"face-show"},[e._v("공개")]),o("div",{staticClass:"face-noshow"},[e._v("비공개")])])}],a=o("1da1"),i=(o("96cf"),o("159b"),o("b0c0"),o("a434"),o("99af"),o("17e1")),c=o("260b"),s=(o("ea7b"),{name:"RoomsPage",data:function(){return{roomName:null,uid:this.$store.state.uid,rooms:[],addState:!1,roomNameCheck:!1,capacity:1}},props:["user"],mounted:function(){0==this.rooms.length&&(console.log("시작한다"),this.loadData())},methods:{checkRoomName:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.rooms.forEach((function(t){t.name==e.roomName&&(e.roomNameCheck=!0)}));case 2:e.roomNameCheck?e.roomName="":e.addRoom();case 3:case"end":return t.stop()}}),t)})))()},addRoom:function(){var e=this;this.addState=!0,console.log("추가할거야",this.roomName,this.rooms);var t=i["a"].collection("users").doc(this.user.uid);t.set({name:this.user.uid}),t.collection("rooms").add({name:this.roomName,createdAt:c["a"].firestore.FieldValue.serverTimestamp()}).then((function(){e.roomName=""}))},deleteRoom:function(e,t){console.log("지운다잉",this.rooms),i["a"].collection("users").doc(this.user.uid).collection("rooms").doc(e).delete(),this.rooms.splice(t,1)},moveToCheckIn:function(e,t){console.log("move to check in page",e),console.log("this room name"),this.uid||(this.uid="none"),this.$router.push({path:"/checkin/".concat(this.uid,"/").concat(e),params:{roomId:e,roomNameParams:t}})},loadData:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=i["a"].collection("users"),t.next=3,o.get().then(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.forEach(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.doc(r.id).collection("rooms").onSnapshot(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.forEach((function(t){var o={id:t.id,hostID:r.id,name:t.data().name};if(0!=e.rooms.length){for(var n=!1,a=0;a<e.rooms.length;a++)e.rooms[a]["id"]===t.id&&(n=!0);!n&&e.addState?e.rooms.unshift(o):n||e.addState||e.rooms.push(o)}else e.rooms.push(o)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})))()}}}),u=s,m=(o("0616"),o("2877")),l=Object(m["a"])(u,r,n,!1,null,"4cd9f87c",null);t["default"]=l.exports},a434:function(e,t,o){"use strict";var r=o("23e7"),n=o("23cb"),a=o("a691"),i=o("50c4"),c=o("7b0b"),s=o("65f0"),u=o("8418"),m=o("1dde"),l=m("splice"),f=Math.max,d=Math.min,h=9007199254740991,p="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!l},{splice:function(e,t){var o,r,m,l,v,b,g=c(this),w=i(g.length),k=n(e,w),x=arguments.length;if(0===x?o=r=0:1===x?(o=0,r=w-k):(o=x-2,r=d(f(a(t),0),w-k)),w+o-r>h)throw TypeError(p);for(m=s(g,r),l=0;l<r;l++)v=k+l,v in g&&u(m,l,g[v]);if(m.length=r,o<r){for(l=k;l<w-r;l++)v=l+r,b=l+o,v in g?g[b]=g[v]:delete g[b];for(l=w;l>w-r+o;l--)delete g[l-1]}else if(o>r)for(l=w-r;l>k;l--)v=l+r-1,b=l+o-1,v in g?g[b]=g[v]:delete g[b];for(l=0;l<o;l++)g[l+k]=arguments[l+2];return g.length=w-r+o,m}})},a640:function(e,t,o){"use strict";var r=o("d039");e.exports=function(e,t){var o=[][e];return!!o&&r((function(){o.call(null,t||function(){throw 1},1)}))}},b0c0:function(e,t,o){var r=o("83ab"),n=o("9bf2").f,a=Function.prototype,i=a.toString,c=/^\s*function ([^ (]*)/,s="name";r&&!(s in a)&&n(a,s,{configurable:!0,get:function(){try{return i.call(this).match(c)[1]}catch(e){return""}}})},b727:function(e,t,o){var r=o("0366"),n=o("44ad"),a=o("7b0b"),i=o("50c4"),c=o("65f0"),s=[].push,u=function(e){var t=1==e,o=2==e,u=3==e,m=4==e,l=6==e,f=7==e,d=5==e||l;return function(h,p,v,b){for(var g,w,k=a(h),x=n(k),N=r(p,v,3),C=i(x.length),y=0,R=b||c,_=t?R(h,C):o||f?R(h,0):void 0;C>y;y++)if((d||y in x)&&(g=x[y],w=N(g,y,k),e))if(t)_[y]=w;else if(w)switch(e){case 3:return!0;case 5:return g;case 6:return y;case 2:s.call(_,g)}else switch(e){case 4:return!1;case 7:s.call(_,g)}return l?-1:u||m?m:_}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},ec07:function(e,t,o){}}]);
//# sourceMappingURL=chunk-5f44d94a.d8cb3640.js.map