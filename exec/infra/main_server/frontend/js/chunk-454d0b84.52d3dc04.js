(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-454d0b84","chunk-0f05dcdc","chunk-5b5e1cf4"],{"0f2c":function(t,e,o){},"123b":function(t,e,o){},"159b":function(t,e,o){var a=o("da84"),s=o("fdbc"),r=o("17c2"),n=o("9112");for(var c in s){var i=a[c],l=i&&i.prototype;if(l&&l.forEach!==r)try{n(l,"forEach",r)}catch(u){l.forEach=r}}},"17c2":function(t,e,o){"use strict";var a=o("b727").forEach,s=o("a640"),r=s("forEach");t.exports=r?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},2532:function(t,e,o){"use strict";var a=o("23e7"),s=o("5a34"),r=o("1d80"),n=o("ab13");a({target:"String",proto:!0,forced:!n("includes")},{includes:function(t){return!!~String(r(this)).indexOf(s(t),arguments.length>1?arguments[1]:void 0)}})},"3f4c":function(t,e,o){},"5a34":function(t,e,o){var a=o("44e7");t.exports=function(t){if(a(t))throw TypeError("The method doesn't accept regular expressions");return t}},"5d73":function(t,e,o){"use strict";o("123b")},a434:function(t,e,o){"use strict";var a=o("23e7"),s=o("23cb"),r=o("a691"),n=o("50c4"),c=o("7b0b"),i=o("65f0"),l=o("8418"),u=o("1dde"),d=u("splice"),m=Math.max,p=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!d},{splice:function(t,e){var o,a,u,d,f,g,b=c(this),k=n(b.length),y=s(t,k),C=arguments.length;if(0===C?o=a=0:1===C?(o=0,a=k-y):(o=C-2,a=p(m(r(e),0),k-y)),k+o-a>h)throw TypeError(v);for(u=i(b,a),d=0;d<a;d++)f=y+d,f in b&&l(u,d,b[f]);if(u.length=a,o<a){for(d=y;d<k-a;d++)f=d+a,g=d+o,f in b?b[g]=b[f]:delete b[g];for(d=k;d>k-a+o;d--)delete b[d-1]}else if(o>a)for(d=k-a;d>y;d--)f=d+a-1,g=d+o-1,f in b?b[g]=b[f]:delete b[g];for(d=0;d<o;d++)b[d+y]=arguments[d+2];return b.length=k-a+o,u}})},a640:function(t,e,o){"use strict";var a=o("d039");t.exports=function(t,e){var o=[][t];return!!o&&a((function(){o.call(null,e||function(){throw 1},1)}))}},a94b:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"approve-wrapper"},[o("div",{staticClass:"approve-inner-wrapper"},[o("div",{staticClass:"room-name-header"},[o("div",{staticClass:"room_name"},[t._v(t._s(t.roomName))]),o("div",{staticClass:"buttons"},[o("form",{staticClass:"approve-form",on:{submit:function(t){t.preventDefault()}}},[o("input",{attrs:{type:"hidden",name:"roomId",value:"something"}}),o("input",{attrs:{type:"hidden",name:"userId",value:"something"}}),o("input",{attrs:{type:"hidden",name:"roomName",value:"something"}}),!t.attendeeJoined&&t.attendeeApproved?o("button",{staticClass:"join-btn",on:{click:t.doJoin}},[t._v(" 입장하기 ")]):t._e(),!t.attendeeJoined&&t.attendeeApproved?o("button",{staticClass:"leave-btn",on:{click:function(e){return t.doLeave(t.user.uid)}}},[t._v(" 나가기 ")]):t._e()])])]),t.user&&t.user.uid==t.hostId||t.attendeeApproved?o("div",{staticClass:"attendee-list-wrapper"},[o("div",{staticClass:"attendee-attend"},[o("h4",{},[t._v("* 참가자")]),o("ul",{},t._l(t.attendeesApprovedArr,(function(e,a){return o("li",{key:e.id},[e.id!=t.hostId?o("div",{staticClass:"attendee-nickname"},[t._v("익명이"+t._s(a+1))]):o("div",{staticClass:"attendee-nickname"},[t._v("담이")]),t.user&&t.user.uid==t.hostId?o("a",{staticClass:"approve-btn-attend",attrs:{type:"button",title:"Approve attendee"},on:{click:function(o){return t.toggleApproval(e.id)}}},[t._v(" 내보내기 ")]):t._e()])})),0)]),t.user&&t.user.uid==t.hostId?o("div",{staticClass:"attendee-wait"},[o("h4",{},[t._v("* 참가 대기자")]),o("ul",{},t._l(t.attendeesPendingArr,(function(e,a){return o("li",{key:e.id},[e.id!=t.hostId?o("div",{staticClass:"attendee-nickname"},[t._v("익명이"+t._s(a+1))]):o("div",{staticClass:"attendee-nickname"},[t._v("담이")]),o("span",[o("a",{staticClass:"approve-btn-attend",attrs:{type:"button",title:"Approve attendee"},on:{click:function(o){return t.toggleApproval(e.id)}}},[t._v("참가승인 ")]),o("a",{staticClass:"approve-btn-delete",attrs:{type:"button",title:"Delete Attendee"},on:{click:function(o){return t.deleteAttendee(e.id)}}},[t._v("참가거절")])])])})),0)]):t._e()]):o("div",[o("p",{staticClass:"lead"},[t._v(" 안녕하세요! 현재 참가 요청에 대한 방장의 승인이 진행 중에 있습니다. 잠시만 기다려주세요! ")]),o("div",{staticClass:"leave_approve",on:{click:function(e){return t.doLeave(t.user.uid)}}},[t._v(" 나가기 ")])])])])},s=[],r=(o("159b"),o("bc3a"),o("17e1")),n={data:function(){return{hostNickName:null,attendeesPendingArr:[],attendeesApprovedArr:[],attendeeApproved:!1,attendeeJoined:!1,roomPublic:!1}},components:{},methods:{toggleApproval:function(t){if(this.user&&this.user.uid==this.hostId){var e=r["a"].collection("users").doc(this.user.uid).collection("rooms").doc(this.roomId).collection("attendees").doc(t);e.get().then((function(t){var o=t.data().approved;console.log("approved",o),o?e.update({approved:!o}):e.update({approved:!0})}))}},deleteAttendee:function(t){console.log("삭제한다"),(this.user&&this.user.uid==this.hostId||this.user&&this.user.uid==t)&&(r["a"].collection("users").doc(this.hostId).collection("rooms").doc(this.roomId).collection("attendees").doc(t).delete(),console.log("삭제 완료스"))},doJoin:function(){var t=document.querySelector(".approve-form");console.log(this.roomPublic),this.roomPublic?t.action="http://localhost:3000/":t.action="http://localhost:3000/ar",t.method="POST",t.target="pop",t.roomId.value=this.roomId,t.userId.value=this.user.uid,t.roomName.value=this.roomName,window.open("","pop"),t.submit()},doLeave:function(t){console.log(t,"삭제해야한다"),this.deleteAttendee(t),this.attendeeJoined=!1,this.$emit("exitRoom")}},props:["user","roomId","roomName","hostId"],mounted:function(){var t=this;console.log("this is approve page",this.user,this.roomId,this.roomName,this.hostId);var e=r["a"].collection("users").doc(this.hostId).collection("rooms").doc(this.roomId);e.get().then((function(e){e.exists||(alert("존재하지 않는 상담방입니다."),t.$router.push("/all/rooms"))})),console.log("this.rooms"),e.onSnapshot((function(e){t.roomPublic=e.data().publicState})),e.collection("attendees").onSnapshot((function(e){var o=[],a=[];e.forEach((function(e){t.hostId===e.id&&(t.hostNickName="담이"),t.user&&t.user.uid==e.id&&!0,e.data().approved?(t.user.uid==e.id&&(t.attendeeApproved=!0),a.push({id:e.id,approved:e.data().approved})):(t.user.uid==e.id&&(t.attendeeApproved=!1),o.push({id:e.id,approved:e.data().approved}))})),t.attendeesPendingArr=o,t.attendeesApprovedArr=a}))}},c=n,i=(o("b972"),o("2877")),l=Object(i["a"])(c,a,s,!1,null,"657c6e0e",null);e["default"]=l.exports},ab13:function(t,e,o){var a=o("b622"),s=a("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(o){try{return e[s]=!1,"/./"[t](e)}catch(a){}}return!1}},adff:function(t,e,o){"use strict";o("0f2c")},b727:function(t,e,o){var a=o("0366"),s=o("44ad"),r=o("7b0b"),n=o("50c4"),c=o("65f0"),i=[].push,l=function(t){var e=1==t,o=2==t,l=3==t,u=4==t,d=6==t,m=7==t,p=5==t||d;return function(h,v,f,g){for(var b,k,y=r(h),C=s(y),_=a(v,f,3),w=n(C.length),S=0,x=g||c,L=e?x(h,w):o||m?x(h,0):void 0;w>S;S++)if((p||S in C)&&(b=C[S],k=_(b,S,y),t))if(e)L[S]=k;else if(k)switch(t){case 3:return!0;case 5:return b;case 6:return S;case 2:i.call(L,b)}else switch(t){case 4:return!1;case 7:i.call(L,b)}return d?-1:l||u?u:L}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterOut:l(7)}},b972:function(t,e,o){"use strict";o("3f4c")},c52a:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"rooms-wrapepr"},[o("div",{staticClass:"before"},[o("i",{staticClass:"fas fa-arrow-left",on:{click:t.moveToBack}})]),o("div",{staticClass:"intro_title"},[t._v(" 당신은 오늘 어떤 마음 속 이야기를 나누고 싶나요? ")]),o("div",{staticClass:"background-image"}),o("Star"),o("div",{staticClass:"list-pop-up"},[o("div",{staticClass:"list-pop-up-inner-wrapper"},[o("div",{staticClass:"room-card"},[o("div",{staticClass:"room-card-front"},[o("div",{staticClass:"category-name"},[t._v(t._s(t.category_name))]),o("div",{staticClass:"healing_text"}),o("div",{staticClass:"create-chat-room"},[t._v("상담소 열기")])]),o("div",{staticClass:"room-card-back"},[o("h1",[t._v("상담소 열기")]),o("form",{on:{submit:function(t){t.preventDefault()}}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.roomName,expression:"roomName"}],attrs:{type:"text",placeholder:"상담소 이름을 적어주세요"},domProps:{value:t.roomName},on:{input:function(e){e.target.composing||(t.roomName=e.target.value)}}}),t._m(0),o("h2",[t._v("얼굴 공개 여부")]),o("div",{staticClass:"public-wrapper"},[o("div",{staticClass:"public public-btn",on:{click:t.public}},[t._v("공개")]),o("div",{staticClass:"non-public public-btn public-active",on:{click:t.nonpublic}},[t._v("비공개")])]),o("h2",[t._v("상담 분야 소개")]),o("div",{staticClass:"room-category-select"},t._l(t.categories,(function(e,a){return o("div",{key:a,staticClass:"room-category",attrs:{"data-value":"1","data-value":a+1}},[t._v(" "+t._s(t.categories[a])+" ")])})),0),o("div",{staticClass:"room-create-btn"},[o("div",{staticClass:"create-room-btn public-btn",on:{click:function(e){return e.preventDefault(),t.checkRoomName(e)}}},[t._v("개설하기")]),o("div",{staticClass:"exit-room-create public-btn"},[t._v("취소")])])])])]),o("div",{staticClass:"room-list"},[o("div",{staticClass:"room-list-wrapper"},t._l(t.displayRooms,(function(e,a){return o("div",{key:a,staticClass:"room-item"},[o("div",{staticClass:"room-item-left"},[o("h1",{staticClass:"room-name"},[t._v(t._s(e.name))]),o("p",[t._v("얼굴 공개 여부 : "+t._s(e.publicState?"공개":"비공개"))]),o("p",[t._v("참가자 허용 인원 : "+t._s(e.capacity)+" 명")]),o("div",{staticClass:"room-category-flag-wrapper"},t._l(e.category,(function(e,a){return o("span",{key:a,staticClass:"room-category-flag",style:{backgroundColor:t.tagColors[a]}},[t._v(t._s(t.categories[e]))])})),0),o("div",{staticClass:"room-btn"},[t.uid===e.hostID?o("span",{on:{click:function(o){return t.deleteRoom(e.id,a)}}},[t._v("삭제하기")]):t._e()])]),o("div",{staticClass:"room-item-right"},[o("div",{staticClass:"enter-room-btn",on:{click:function(o){return t.moveToCheckIn(e.hostID,e.id,e.name)}}},[o("span",[t._v("입장")]),o("span",[t._v("하기")])])])])})),0)]),t._m(1)])]),o("div",{staticClass:"card-main-wrapper"},[o("div",{staticClass:"card-main-board"}),o("div",{staticClass:"card-inner-wrapper"},t._l(t.categories,(function(e,a){return o("div",{key:a,staticClass:"card"},[o("div",{staticClass:"card-flip"},[o("div",{staticClass:"card-inner"},[o("div",{staticClass:"symbole"},[t._v(" "+t._s(e)+" ")])]),o("div",{staticClass:"card-outer",style:{backgroundColor:t.tagColors[a]},attrs:{"data-value":a+1},on:{click:function(e){return t.select(a)}}},[o("div",{staticClass:"outer_symbole"}),o("span",{staticClass:"symbol-1"}),o("h2",[t._v("입장하기")])])])])})),0)]),o("div",{staticClass:"prev-button button"},[t._v("이전")]),o("div",{staticClass:"next-button button"},[t._v("다음")]),t.approveState?o("approve",{staticClass:"aprrove-pop-up",attrs:{user:t.user,roomId:t.roomId,hostId:t.hostId,roomName:t.roomName},on:{exitRoom:t.exitCheckin}}):t._e(),t.checkinState?o("check-in-page",{staticClass:"check-in-pop-up",attrs:{user:t.user,roomId:t.roomId,hostId:t.hostId,roomName:t.roomName},on:{showApprove:t.showApprove}}):t._e(),t.checkinState&&!t.approveState?o("div",{staticClass:"checkin-exit",on:{click:t.exitCheckin}},[t._v("떠나기")]):t._e()],1)},s=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"capacity-wrapper"},[o("h2",[t._v("참가 허용 인원")]),o("div",{staticClass:"capacity-count"},[o("div",{staticClass:"count-btn count-plus"},[t._v("더하기")]),o("div",{staticClass:"count-num"},[t._v("1")]),o("div",{staticClass:"count-btn count-minus"},[t._v("빼기")])]),o("p",{staticClass:"capacity-warning-over"},[t._v("최대 인원은 4명 이하 입니다.")]),o("p",{staticClass:"capacity-warning-less"},[t._v("최초 인원은 1명 이상 입니다.")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"room-list-eixt-btn"},[o("i",{staticClass:"fas fa-sign-out-alt"})])}],r=o("1da1"),n=(o("caad"),o("2532"),o("159b"),o("b0c0"),o("99af"),o("a434"),o("96cf"),o("53f2")),c=o("c5a7"),i=o("a94b"),l=function(){var t,e=0,o=0,a=0,s=document.querySelector(".card-main-wrapper"),r=document.querySelectorAll(".card"),n=document.querySelector(".prev-button"),c=document.querySelector(".next-button"),i=document.querySelector(".room-list-eixt-btn"),l=document.querySelector(".list-pop-up"),u=document.querySelector(".create-chat-room"),d=document.querySelector(".room-card-front"),m=document.querySelector(".room-card-back"),p=document.querySelector(".exit-room-create"),h=document.querySelector(".public"),v=document.querySelector(".non-public"),f=document.querySelector(".room-category-select"),g=document.querySelectorAll(".room-category"),b=(document.querySelector(".category-name"),document.querySelector(".intro_title"));document.querySelector(".front-card-img");console.log(r),e=r.length,t=360/e,console.log(t);for(var k=0;k<e;k++)r[k].style.transform="rotate(".concat(t*k,"deg) translateY(-350px)");function y(){0==o?o=e-1:o--,a+=t,_(),console.log(o,a)}function C(){o==e-1?o=0:o++,a-=t,_(),console.log(o,a)}function _(){for(var o=0;o<e;o++)r[o].style.transform="rotate(".concat(a+t*o,"deg) translateY(-350px)")}function w(t){if(t.target.classList.contains("card-outer")){var e=t.target,o=parseInt(t.target.dataset.value,10)-1;g.forEach((function(t){t.dataset.value==o+1&&t.classList.add("room-category-selected")})),b.classList.add("show"),s.classList.add("bottom"),l.classList.add("list-pop-up-show"),e.classList.add("card-show"),n.classList.add("button-hide"),c.classList.add("button-hide")}}function S(){l.classList.remove("list-pop-up-show"),s.classList.remove("bottom"),n.classList.remove("button-hide"),c.classList.remove("button-hide"),m.classList.remove("room-card-back-fade"),d.classList.remove("room-card-front-fade"),b.classList.remove("show"),g.forEach((function(t){t.classList.remove("room-category-selected")}))}function x(){m.classList.add("room-card-back-fade"),d.classList.add("room-card-front-fade")}function L(){m.classList.remove("room-card-back-fade"),d.classList.remove("room-card-front-fade")}function I(){h.classList.add("public-active"),v.classList.remove("public-active")}function A(){h.classList.remove("public-active"),v.classList.add("public-active")}n.addEventListener("click",y),c.addEventListener("click",C),p.addEventListener("click",L),u.addEventListener("click",x),i.addEventListener("click",S),s.addEventListener("click",w),h.addEventListener("click",I),v.addEventListener("click",A);var E=1,N=document.querySelector(".count-plus"),R=document.querySelector(".count-minus"),q=document.querySelector(".count-num"),T=document.querySelector(".capacity-warning-over"),D=document.querySelector(".capacity-warning-less");function O(){N.classList.add("click"),E<=3?(E++,q.innerText=E,T.classList.remove("capacity-warning-show"),D.classList.remove("capacity-warning-show")):T.classList.add("capacity-warning-show"),setTimeout((function(){N.classList.remove("click")}),300)}function $(){R.classList.add("click"),E>=2?(E--,q.innerText=E,D.classList.remove("capacity-warning-show"),T.classList.remove("capacity-warning-show")):D.classList.add("capacity-warning-show"),setTimeout((function(){R.classList.remove("click")}),300)}function P(t){t.target.classList.contains("room-category")&&t.target.classList.toggle("room-category-selected")}N.addEventListener("click",O),R.addEventListener("click",$),f.addEventListener("click",P)},u=o("17e1"),d=o("260b"),m=(o("ea7b"),{name:"Allroompage",data:function(){return{roomName:null,uid:this.$store.state.uid,rooms:[],addState:!1,roomNameCheck:!1,capacity:null,publicState:!1,roomDesc:null,selectedCategory:[],roomId:null,hostId:null,checkinState:!1,approveState:!1,category_name:null,displayRooms:[],login_state:!1,selected:null,tagColors:["#004e66","#EE7785","#fab1ce","#84B1ED","#ABBEEC","#F4C464","#bf209f","#8CC1D3"],imgUrl:"@/assets/svg/tarot5.svg",categories:["학교 생활","직장 생활","학업 및 진로","자녀 양육","대인 관계","심리 및 정서","연애","취업"],healingTexts:["  그대는 충분히 반짝거리기에, <br />그대가 주인공인 삶을 살아줬으면 한다.","잠들지 않아도 꿈꾸던 널,<br> 잊지 않기를 바란다.","같은 실수를 두려워하되, 새로운 실수를 <br>두려워하지 마라. 실수는 곧 경험이다.","자녀들에게는 어머니보다 더 훌륭한 <br> 하늘로부터 받은 선물은 없다.","당신은 달 같은 존재예요. <br> 세상에 하나뿐인, 사라져서는 안 될 <br> 소중한 존재","한 겨울에도 움트는 봄이 있는가 하면, <br> 밤의 장작 뒤에도 미소 짓는 새벽이 있다.","사랑을 이야기하면 사랑을 하게 된다.","준비와 기회가 조우할 때 일어나는 것, <br> 그것이 바로 행운이다."],healingText:""}},components:{CheckInPage:c["default"],Approve:i["default"],Star:n["a"]},props:["user"],created:function(){console.log(document.cookie),console.log(this.$store.getters.getAuthToken);var t=this.$store.getters.getAuthToken;""!=t&&null!=t||(alert("로그인이 필요합니다."),this.$router.push({name:"Login"}))},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(l(),0!=t.rooms.length){e.next=5;break}return console.log("시작한다"),e.next=5,t.loadData();case 5:case"end":return e.stop()}}),e)})))()},methods:{public:function(){this.publicState=!0},nonpublic:function(){this.publicState=!1},moveToBack:function(){this.$router.push({name:"MainIsland"})},select:function(t){this.selected=t;var e=document.querySelector(".healing_text");e.innerHTML=this.healingTexts[t],console.log(t),this.displayRooms=[],this.category_name=this.categories[t];for(var o=0;o<this.rooms.length;o++)this.rooms[o].category.includes(t)&&this.displayRooms.unshift(this.rooms[o]);this.displayRooms.reverse(),console.log(this.displayRooms)},showApprove:function(){console.log("approve"),this.approveState=!0},exitCheckin:function(){this.checkinState=!1,this.approveState=!1},checkRoomName:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!=t.roomName&&""!=t.roomName){e.next=3;break}return alert("방 이름은 필수 입력 사항입니다."),e.abrupt("return");case 3:return e.next=5,t.rooms.forEach((function(e){e.name==t.roomName&&(t.roomNameCheck=!0)}));case 5:t.roomNameCheck?t.roomName="":t.getCategory();case 6:case"end":return e.stop()}}),e)})))()},getCategory:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=document.querySelectorAll(".room-category"),e.next=3,o.forEach((function(e){e.classList.contains("room-category-selected")&&(t.selectedCategory.push(e.dataset.value-1),console.log("돈다"))}));case 3:t.addRoom();case 4:case"end":return e.stop()}}),e)})))()},addRoom:function(){var t=this,e=new Date,o=e.getFullYear(),a=e.getMonth()+1,s=e.getDate(),r=e.getHours(),n=e.getMinutes(),c=e.getSeconds(),i=document.querySelector(".count-num");console.log(i.innerText),this.addState=!0,console.log("추가할거야",this.roomName,this.rooms);var l=u["a"].collection("users").doc(this.user.uid);l.set({name:this.user.uid}),console.log("추가할거야",this.publicState),l.collection("rooms").add({name:this.roomName,hostId:this.user.uid,capacity:i.innerText,publicState:this.publicState,category:this.selectedCategory,createdDate:"".concat(o,"-").concat(a,"-").concat(s,", ").concat(r,":").concat(n,":").concat(c),createdAt:d["a"].firestore.FieldValue.serverTimestamp()}).then((function(){t.roomName="",t.loadData()}))},deleteRoom:function(t,e){var o=this;console.log("지운다잉",this.rooms),u["a"].collection("users").doc(this.user.uid).collection("rooms").doc(t).delete(),console.log(this.displayRooms),this.displayRooms.splice(e,1),console.log(this.displayRooms),this.rooms.forEach((function(e,a){e.id==t&&o.rooms.splice(a,1)}))},moveToCheckIn:function(t,e,o){this.checkinState=!0,console.log("move to check in page",e),console.log("this room name"),this.uid||(this.uid="none"),this.hostId=t,this.roomId=e,this.roomName=o;var a=document.querySelector(".checkin-exit");a.classList.add("checkin-exit-show")},loadData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=u["a"].collection("users"),e.next=3,o.get().then(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.forEach(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.doc(a.id).collection("rooms").onSnapshot(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.forEach((function(e){var o={id:e.id,hostID:a.id,name:e.data().name,createdAt:e.data().createdDate,publicState:e.data().publicState,category:e.data().category,capacity:e.data().capacity};if(0!=t.rooms.length){for(var s=!1,r=0;r<t.rooms.length;r++)t.rooms[r]["id"]===e.id&&(s=!0);s||(console.log("더할거에요"),t.rooms.unshift(o))}else t.rooms.push(o);console.log("for")}));case 2:t.rooms.sort((function(t,e){t.createdAt,e.createdAt})),null!=t.selected&&t.select(t.selected),console.log(t.rooms,"sorting");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})))()}}}),p=m,h=(o("adff"),o("2877")),v=Object(h["a"])(p,a,s,!1,null,"2829b6ff",null);e["default"]=v.exports},c5a7:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"checkin-wrapper"},[o("div",{staticClass:"checkin-inner-wrapper"},[o("h1",{staticClass:"room-name"},[t._v(t._s(t.roomName))]),t.user?o("div",{staticClass:"for-user"},[o("p",{staticClass:"checkin-warning"},[t._v("잠깐!")]),o("p",{staticClass:"checkin-warning"},[t._v(" 화상채팅은 웹캠을 이용한 서비스로 개인적인 공간의 노출이 발생할 수 있습니다. 비디오를 시작하기 전 주변에 개인적인 정보를 노출할 수 있는 위험 요소를 다시 한번 확인해 주시기 바랍니다. 또한, 개인적인 정보를 요구하는 등의 행위는 불법임으로 즉각 신고 조치를 취해주십시오. 신고된 사용자는 저희 POREST가 법적 조취를 취할 것입니다. 개인적인 부주의로 인한 개인정보 노출에 대해서는 POREST가 책임지지 않습니다. ")]),o("div",{staticClass:"warning-checkbox"},[o("p",[t._v("위의 내용을 확인했습니다.")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.checkState,expression:"checkState"}],staticClass:"checkbox",attrs:{type:"checkbox",name:"",id:""},domProps:{checked:Array.isArray(t.checkState)?t._i(t.checkState,null)>-1:t.checkState},on:{change:function(e){var o=t.checkState,a=e.target,s=!!a.checked;if(Array.isArray(o)){var r=null,n=t._i(o,r);a.checked?n<0&&(t.checkState=o.concat([r])):n>-1&&(t.checkState=o.slice(0,n).concat(o.slice(n+1)))}else t.checkState=s}}})]),o("span",{staticClass:"warning-checkbox-nonactive"},[t._v("확인 여부를 체크해주세요.")])]):t._e(),o("form",{on:{submit:function(e){return e.preventDefault(),t.handleCheckIn(e)}}},[t.user?o("div",{staticClass:"card-body"},[t._m(0)]):o("div",{staticClass:"non-user"},[o("h1",{},[t._v("죄송합니다.")]),o("p",{},[t._v(" 로그인한 유저만 입장이 가능합니다. "),o("br"),o("router-link",{attrs:{to:"/login"}},[t._v("로그인")]),t._v(" 혹은 "),o("router-link",{attrs:{to:"/register"}},[t._v("회원가입")]),t._v("을 진행 후 이용해 주세요. "),o("br"),t._v(" 감사합니다. ")],1)])])])])},s=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{},[o("button",{staticClass:"checkin-btn",attrs:{type:"submit"}},[t._v("입장하기")])])}],r=o("260b"),n=(o("b7aa"),o("17e1")),c={name:"Checkinpage",data:function(){return{nickName:null,checkState:!1}},props:["user","roomId","roomName","hostId"],methods:{handleCheckIn:function(){var t=this,e=document.querySelector(".warning-checkbox-nonactive");if(console.log(this.checkState),this.checkState){e.classList.remove("warning-show");var o=n["a"].collection("users").doc(this.hostId).collection("rooms").doc(this.roomId);o.get().then((function(e){e.exists&&(console.log("존재한다."),o.collection("attendees").doc(t.user.uid).set({createdAt:r["a"].firestore.FieldValue.serverTimestamp()}).then((function(){t.$emit("showApprove")})))}))}else e.classList.add("warning-show")}},mounted:function(){var t=this;r["a"].auth().onAuthStateChanged((function(e){e&&(t.nickName=e.nickName)})),console.log(this.user,this.roomName,this.roomId,this.hostId)}},i=c,l=(o("5d73"),o("2877")),u=Object(l["a"])(i,a,s,!1,null,"7406aa3f",null);e["default"]=u.exports},caad:function(t,e,o){"use strict";var a=o("23e7"),s=o("4d64").includes,r=o("44d2");a({target:"Array",proto:!0},{includes:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),r("includes")}}]);
//# sourceMappingURL=chunk-454d0b84.52d3dc04.js.map