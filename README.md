![한사랑](README.assets/한사랑.png)

### [ SSAFY 2학기 자율프로젝트 ]

​	2021. 04.12 ~ 2021.05.28

###  

### 1. 🤞팀소개

- **한마음 수목원 [대전2반_B208]**

  - 행복한 한마음 수목원입니다.

- **팀원소개**

  - 팀장 : 강민지(FE)
  - 팀원 : 권용수(FE), 김종성(BE),  윤기현(BE), 정시은(FE)

- **역할**

  -  강민지
     -  프론트엔드 개발
     -  UI/UX 구현
  -  권용수 (프론트엔드 팀장)
     -  프론트엔드 개발
     -  UI/UX 구현
  -  김종성 (백엔드 팀장)
     -  백엔드 개발
     -  인프라 구현
  -  윤기현 (인프라 총괄)
     -  백엔드 개발
     -  인프라 총괄
  -  정시은 (디자인 팀장)
     -  프론트엔드 개발
     -  UI/UX 구현

  



### 2. 🤘 프로젝트 소개

#### 	[ 한마음 상담소 (가제) ]	

> 이유 :
>

#### (1) 주제

​	코로나 블루를 위한 실시간 심리지원 서비스



#### (2) 선정 배경 및 시장 분석

- **2-1. 기술/트렌드 동향**

  ‘코로나 블루’라고 불릴 정도로 코로나19로 인한 정신건강문제가 심각한 수준에 이르자, 정부가 종합대책을 마련했다. 정부는 정세균 국무총리 주재 국정현안점검조정회의에서 ‘온국민 마음건강 종합대책(제2차 정신건강복지기본계획)’을 논의하고, 코로나19 극복과 전 국민 정신건강 증진을 위해 향후 5년간 정신건강 분야에서 국가책임과 공공성을 강화하기로 했다. 코로나19가 장기화됨에 따라 정신건강에 대한 관심과 수요가 높아지고 있고, 낮은 행복지수와 높은 자살률 등 우리 사회의 정신건강 수준을 고려할 때 코로나19 이후 정신건강 문제는 더욱 심각해질 우려가 제기되고 있다. 특히, 사회적 거리 두기 등으로 기존의 건강한 사람도 우울ㆍ불안을 겪고 있으며, 전 세계적으로 코로나19로 인한 정신건강 문제 해결을 위해 국가적 대응 전략이 필요한 상황이다. 이에 전 국민의 정신건강 증진에 정책의 우선순위를 두고 국가 책임을 강화하고자 향후 5년간의 정책 방향을 담은 적극적이고 포괄적인 ‘제2차 정신건강복지기본계획’을 수립, 6대 전략과 핵심과제를 마련했다.

 - **2-2. 국내/외 현황**

   보건복지부에 따르면 수도권에서 사회적 거리두기 2.5단계가 시행된 이후인 지난달 31일부터 지난 6일까지 1주일간 정부 정신건강센터 등에 접수된 심리상담 건수는 총 2만2792건으로, 거리두기 강화 이전인 지난 달 10일부터 16일까지 1주일간 접수된 건수(1만1807건)에 비해 2배 가까이 증가한 것으로 나타났다.

 - **2-3. 벤치마킹 또는 유사 서비스 사례**

   서울시는 코로나19 장기화로 마음이 힘든 시민들이 비대면 상담을 할 수 있도록 카카오톡 챗봇 서비스 ‘누구나’를 첫 개시하고, 축적된 심리지원 제공하는 플랫폼 ‘모두다’ 홈페이지도 개설, 운영한다.
   
   

#### (3) 목적 (소비자/시장에 줄 수 있는 가치)

​	정신 건강의 문제를 호소하는 많은 이들은 실제로 병원에 방문하거나 상담소에 방문하는 것에 많은 어려움이 있다. 그리고 코로나로 인해 실제 방문하는 기회 또	한 없어지고 있는 상황이다. 하지만, 한마음상담소 서비스는 코로나 시대에 맞는 비대면 화상 서비스를 지원함으로써 많은 문제를 해결할 수 있을 것으로 기대된	다. 또한, 커뮤니티를 제공하여 서로에게 좋은 영향력과 좋은 컨텐츠를 공유함으로 외로움의 위험에서부터 벗어날 수 있을 것으로 기대된다.



#### (4) 기대하는 목표 

- 실시간 화상채팅을 통해서 언제, 어디서나 도움이 필요할 경우 심리 상담을 받을 수 있다.
- 정신 질환을 호소하는 환자의 경우 자신의 신분과, 얼굴 등의 노출을 힘들어 하기 때문에 이모지를 이용하여 사용자의 신분을 가려줄 수 있도록 구현한다.(유니티?)

- 그룹 채팅방을 구현하여 사용자가 원하는 그룹에서 심리 상담과 치료를 받을 수 있다.

- 비디오 감정 분석을 통해서 사용자의 지속적인 감정 데이터를 수집하고, 이를 기반으로 전문의와 상담을 제공한다.

- 설문을 통해 자신의 정신건강상태를 체크하고 사이트유입을 이끌어낸다.



#### (5) 향후 전망

​	추후 병원과 연동하여 실제 예약을 통해 화상으로 진료를 받으면서, 도움이 필요한 순간 즉시 도움의 손길을 받을 수 있도록 서비스를 제공할 것이다.  또한, 
​	전세계적으로 문제가 되고 있는 자살방지 및 다양한 소외계층 지원에 활용할 것이다.

 

#### (6) 진행 일정



#### (7) 기술 스택

- Java Spring

- MySQL

- Vue.js

- Figma

  

  **[System Architecture]**



#### (8) ERD



#### (9) Sequence Diagram



#### (10) 기능



#### (11) 화면구성 (와이어프레임)



#### (12) 페이지 화면

- 



### 3. UCC영상  



### 4. 👌 개발규칙(컨벤션)  -> 미정

#### 1) 프론트엔드

##### 1. 네이밍

- `PascalCase` : React component(function, class) 등 직접적으로 보여지는 컴포넌트와 하위 컴포넌트
- `camelCase` : 변수명, 재사용되는 함수, props,프로퍼티
- `UPPER_SNAKE_CASE` : [tuple](https://ahnheejong.gitbook.io/ts-for-jsdev/03-basic-grammar/array-and-tuple)(`as const` 등)

 ##### 2. 파일구조

> 파일 기능 및 파일 유형에 의한 분류 중 택 1

- 파일의 기능이나 라우트에 의한 분류: CSS, JS 그리고 텍스트 파일을 기능이나 라우트로 분류하는 방법

```
common/
  Avatar.js
  Avatar.css
  APIUtils.js
  APIUtils.test.js
feed/
  index.js
  Feed.js
  Feed.css
  FeedStory.js
  FeedStory.test.js
  FeedAPI.js
profile/
  index.js
  Profile.js
  ProfileHeader.js
  ProfileHeader.css
  ProfileAPI.js
```

- 파일 유형에 의한 분류

```
api/
  APIUtils.js
  APIUtils.test.js
  ProfileAPI.js
  UserAPI.js
components/
  Avatar.js
  Avatar.css
  Feed.js
  Feed.css
  FeedStory.js
  FeedStory.test.js
  Profile.js
  ProfileHeader.js
  ProfileHeader.css
```

##### 3. 컴포넌트

> [CRA 템플릿](https://github.com/facebook/create-react-app/blob/master/packages/cra-template-typescript/template/src/App.tsx)에 있는 방식으로 컴포넌트를 정의한다.

```javascript
type Props = {
  ...
}

function FunctionComponent({ ... }: Props) {
  ...
}

export default FunctionComponent
```

##### 4. 태그

- 자식을 가지지 않으면, 항상 자신을 닫는(`self-close`) 태그를 사용합니다.
- self-closing에는 한칸의 공백만 사용합니다.

```jsx
// DO NOT
<sample className="sample"></sample>

// DO
// self-closing에는 한칸의 공백만 사용합니다.
<sample className="sample" />
```

- 멀티라인의 경우, 여는 태그와 닫는 태그를 다른 줄에 위치한다.

```jsx
// DO NOT
<sample className="sample"
    type="YUM" />

// DO
<sample 
  className="sample"
  type="YUM" 
/>
```

##### 5. Redux

- Docks 패턴이 아닌 일반적인 Actions 디렉토리와 reducer디렉토리로 나눠서 작성한다.

```
actions/
	types.js
    CommandActions.js
    UserActions.js
reducers/
    index.js
    command.js
    user.js
```

- **공통**
  - 특수문자` _` 허용 안함!!!
- **클래스명**
  - 대문자로 시작
- **함수명**
  - 소문자의 동사로 시작
- **변수명**
  - 소문자로 시작하며 여러 단위로 이루어진 경우 각 단어의 첫글자를 대문자로 표기한다(카멜표기법)
- **그 외**
  - css는 html파일이 아닌 따로 폴더를 만들어서 관리

#### 2) 백엔드

>  깃 커밋 메시지 컨벤션과 마찬가지로 자바 명명 규칙도 처음 보는 사람들이 읽기 쉽게끔 모두가 공유하기 쉬운 컨벤션을 가지고 이름을 지어야 한다.

##### 1. Naming (명명 규칙)

1. 기본적으로 네이밍은 **누구나 알 수 있는 쉬운 단어**를 선택한다.

   - 우리는 외국인이 아니다. 쓸데없이 어려운 고급 어휘를 피한다.

2. 변수는 CamelCase를 기본으로 한다.

   - private String secondName = "William"

3. URL, 파일명 등은 kebab-case를 사용한다.

   - /user-email-page ...

4. 패키지명은 단어가 달라지더라도 무조건 소문자를 사용한다.

   - frontend, useremail ...

5. ENUM이나 상수는 대문자로 네이밍한다.

   - public String NAME = "June" ...

6. 함수명은 소문자로 시작하고 **동사**로 네이밍한다.

   - getUserId(), isNormal() ...

7. 클래스명은 **명사**로 작성하고 UpperCamelCase를 사용한다.

   - UserEmail, Address ...

8. 객체 이름을 함수 이름에 중복해서 넣지 않는다. (= 상위 이름을 하위 이름에 중복시키지 않는다.)

   - line.getLength() (O) / line.getLineLength() (X)

9. 컬렉션은 복수형을 사용하거나 컬렉션을 명시해준다.

   - List ids, Map<User, Int> userToIdMap ...

10. 이중적인 의미를 가지는 단어는 지양한다.

    - event, design ...

11. 의도가 드러난다면 되도록 짧은 이름을 선택한다.

    - retreiveUser() (X) / getUser() (O)
    - 단, 축약형을 선택하는 경우는 개발자의 의도가 명백히 전달되는 경우이다. 명백히 전달이 안된다면 축약형보다 서술형이 더 좋다.

12. 함수의 부수효과를 설명한다.

    - 함수는 한가지 동작만 수행하는 것이 좋지만, 때에 따라 부수 효과를 일으킬 수도 있다.

      ```
      fun getOrder() {
        if (order == null) {
            order = Order()
        }
      return order
      }
      ```

    - 위 함수는 단순히 order만 가져오는 것이 아니라, 없으면 생성해서 리턴한다.

    - 그러므로 getOrder() (X) / getOrCreateOrder() (O)

13. LocalDateTime -> xxxAt, LocalDate -> xxxDt로 네이밍

14. 객체를 조회하는 함수는 JPA Repository에서 findXxx 형식의 네이밍 쿼리메소드를 사용하므로 개발자가 작성하는 Service단에서는 되도록이면 getXxx를 사용하자.

##### 2. Structure

구조 설계에 대한 고민은 항상하기 마련이다. 좋은 설계를 위해 꾸준히 고민하고 리팩토링 작업하는 것을 지향한다.

1. 패키지는 목적별로 묶는다.
   - user(User 관련 패키지), coupon(쿠폰 관련 패키지)
2. Controller에서는 최대한 어떤 Service를 호출할지 결정하는 역할과 Exception처리만을 담당하자.
   - Controller 단에서 로직을 구현하는 것을 지양한다.
   - Controller의 코드 라인 수를 줄이자는 뜻은 절대 아니다.
3. 하나의 메소드와 클래스는 하나의 목적만 수행하게 만든다.
   - 하나의 메소드 안에서는 한 가지 일만 해야한다.
   - 하나의 클래스 안에서는 같은 목적을 둔 코드들의 집합이여야한다.
4. 메소드와 클래스는 최대한 작게 만든다.
   - 메소드와 클래스가 커진다면 하나의 클래스나 메소드 안에서 여러 동작을 하고 있을 확률이 크다.
   - 수많은 책임을 떠안은 클래스를 피한다. 큰 클래스 몇 개가 아니라 작은 클래스 여럿으로 이뤄진 시스템이 더욱 바람직하다.
   - 클래스 나누는 것을 두려워하지 말자.
5. 도메인 서비스를 만들어지는 것을 피하자.
   - User라는 도메인이 있을 때, UserService로 만드는 것을 피한다.
   - 이렇게 도메인 네이밍을 딴 서비스가 만들어지면 자연스레 수많은 책임을 떠안은 큰 클래스로 발전될 가능성이 높다.
   - 기능 별로 세분화해서 만들어보자. (UserRegisterService, UserEmailService 등...)

#### 3) 협업툴

##### (1) Git

- **Branch**

```
master -> dev -> feature/내가만들것(완성해서 merge 후 삭제)

1) clone
2) git checkout -b dev origin/dev
   : 중앙 저장소와 연결된 개발 브랜치를 만들기
3) git checkout -b [feature/내가만들것] dev
  ex)  git checkout -b feature/login dev
   : 기능개발을 위헤 격리된 branch 생성
   
[주의사항]
- 각자 맡은 기능을 구현하기 전에 깃 커밋 메시지 컨벤션에 따라 feature 브랜치를 새로 파서 구현을 시작한다.
- 본인이 직접 생성한 브랜치 외에서 작업해야할 경우 브랜치를 생성한 당사자와 먼저 얘기를 나누자.
- feature 브랜치에서 커밋을 생성할 때 README에 있는 <깃 커밋 메시지 컨벤션>을 준수하여 작성한다.
```

- **Commit**

```
항상 코딩하기전에 dev 가져오기
1) git checkout dev
2) git pull origin dev
```

- **Commit Message Structure (커밋 메세지 구조)**

>제목(subject) / 본문(body) / 꼬리말(footer)로 구성 ( 본문과 꼬리말은 반드시 포함될 필요는 없다.)

```
type : subject (이 곳은 제목이 들어갈 자리입니다.)
  - 커밋 메시지 제목은 제일 앞에 제목의 타입을 붙여준다. 커밋 타입의 종류는 아래 내용을 참고한다.
  - 제목은 50자를 넘기지 않고, 대문자로 작성하고 마침표를 붙이지 않는다.
  - 과거 시제를 사용하지 않고 명령어로 작성한다.
  - 커밋 유형들이 복합적인 경우에는 최대한 분리하여 커밋한다.

body (이 곳은 본문 내용이 들어갈 자리입니다.)
  - 선택 사항이므로 작성하지 않아도 무방하다.
  - 부연설명이 필요하거나 커밋의 이유를 전달해야할 경우 작성한다.
  - 내용은 어떻게 변경하였는지 보다 무엇을, 왜 변경하였는지를 설명하는 위주로 작성한다.
  - 한 줄이 72자를 넘기지 안고 제목과 구분되게 한 줄을 띄우고 작성한다.

footer (이 곳은 꼬리말이 들어갈 자리입니다.)
  - 선택 사항이기 때문에 작성하지 않아도 무방하다
  - 보통 이슈를 추적하기 위해 이슈 트래커 ID를 넣어주는 용도로 사용된다.


[커밋 타입 (Commit Type) ]
feat : 새로운 기능 추가
fix : 버그 수정
docs : 문서 수정
style : 코드 포맷팅, 세미콜론 누락, 코드 변경이 없는 경우
refactor : 코드 리팩토링
test : 테스트 코드, 리팩토링 테스트 코드 추가
chore : 빌드 업무 수정, 패키지 매니저 수정


[예시]
feat: Summarize changes in around 50 characters or less

More detailed explanatory text, if necessary. Wrap it to about 72
characters or so. In some contexts, the first line is treated as the
subject of the commit and the rest of the text as the body. The
blank line separating the summary from the body is critical (unless
you omit the body entirely); various tools like `log`, `shortlog`
and `rebase` can get confused if you run the two together.

Explain the problem that this commit is solving. Focus on why you
are making this change as opposed to how (the code explains that).
Are there side effects or other unintuitive consequenses of this
change? Here's the place to explain them.

Further paragraphs come after blank lines.

 - Bullet points are okay, too

 - Typically a hyphen or asterisk is used for the bullet, preceded
   by a single space, with blank lines in between, but conventions
   vary here

If you use an issue tracker, put references to them at the bottom,
like this:

Resolves: #123
See also: #456, #789
```

- **Push**

```
push는 하루에 한 번 ! 자기 직전에 하기!

반드시 자신이 현재 개발을 진행하고 있는 브랜치에서 push하기!
```


- **Merge Request ( 매주 금요일 )** 

```
1) git push origin [feature/내가만들것]  ====> 반드시 내가 개발완성한 브랜치에서!
 ex) git push origin feature/login
2) GUI에서 create new merge request
3) feature/내가만들것 -> dev으로 요청 설정

[주의사항]
- 기능 하나가 구현이 완료되면 GitLab에서 Merge Requests 기능을 활용한다.
- feature 브랜치를 합칠 때는 해당 브랜치와 관련된 다른 팀원들과 함께 상의하면서 Merge Requests를 진행한다.
- Merge Requests를 진행하는 팀원이 웹엑스의 화면 공유 기능을 활용하는 것을 권장한다.
```

- **완성해서 merge한 브랜치는 삭제**

```
1) git checkout dev
  : dev 브랜치로 옮겨가서 삭제
2) git branch -d [merge시킨브랜치 이름] 
ex) git branch -d feature/login
 : 완성해서 merge한 브랜치 삭제
```



##### (2) Jira 

- **EPIC**

```
주요 기능별로 카테고리를 나눠서 작성한다.
```

- **STORY**

```
EPIC의 세부내용 작성 후 담당자설정 및 매주 Sprint에 올리기

#미리 Story 전부 생성시 매 주 월요일 담당자와 그 주에 해야할 일 결정 후 그 주sprint로 넘기기 & 기간 설정 & 포인트 배정(?)
```



